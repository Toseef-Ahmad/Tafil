<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Tafil</title>

  <!-- Google Fonts - Inter -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet" />

  <!-- Tailwind compiled CSS -->
  <link rel="stylesheet" href="./dist/output.css" />
  
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; script-src 'self'; img-src 'self' data:;" />
  
  <style>
    /* All elements visible by default */
    body { opacity: 1 !important; visibility: visible !important; }
  </style>
</head>
<body class="min-h-screen flex flex-col" style="font-family: 'Inter', -apple-system, sans-serif; background-color: #0a0a0b; color: #fafafa;">
  
  <!-- Header - Compact & Clean -->
  <header class="header sticky top-0 z-50" style="background-color: #111113; border-bottom: 1px solid rgba(255, 255, 255, 0.06);">
    <div class="flex items-center justify-between px-4 h-14">
      <!-- Left: Brand -->
      <div class="flex items-center gap-3">
        <button id="settingsBtn" class="btn btn-ghost btn-icon" title="Settings">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></svg>
        </button>
        <div class="flex items-center gap-2">
          <div class="w-6 h-6 rounded-md bg-gradient-to-br from-violet-500 to-purple-600 flex items-center justify-center">
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="m7 11 2-2-2-2"/><path d="M11 13h4"/><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/></svg>
          </div>
          <span class="text-sm font-semibold" style="color: #fafafa;">Tafil</span>
          <span id="ideCount" class="hidden text-xs px-1.5 py-0.5 rounded" style="color: #52525b; background-color: #18181b;">
            <span id="ideCountNum">0</span> IDEs
          </span>
        </div>
      </div>

      <!-- Right: Actions -->
      <div class="flex items-center gap-2">
        <button id="scanProjectsBtn" class="btn btn-primary">
          <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
          <span>Scan Home</span>
        </button>
        <button id="scanCustomBtn" class="btn btn-secondary">
          <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"/></svg>
          <span>Folder</span>
        </button>
        <button id="refreshBtn" class="btn btn-ghost btn-icon" title="Refresh (⌘R)">
          <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"/><path d="M16 16h5v5"/></svg>
        </button>
        <button id="darkModeToggle" class="btn btn-ghost btn-icon" title="Toggle Theme">
          <svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/></svg>
          <svg id="sunIcon" class="hidden" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg>
        </button>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main-container flex-grow px-4 py-5" style="background-color: #0a0a0b; color: #fafafa;">
    <!-- Info Panel -->
    <div class="info-panel p-4 mb-5" style="background-color: #111113; border: 1px solid rgba(255, 255, 255, 0.06); border-radius: 12px;">
      <div class="flex items-center justify-between gap-4">
        <div class="flex items-center gap-3 min-w-0">
          <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-emerald-500/20 to-emerald-600/20 flex items-center justify-center flex-shrink-0">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#10b981" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 19H5a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v5.5"/><path d="M16 2v4"/><path d="M8 2v4"/><path d="M3 10h18"/><circle cx="18" cy="18" r="3"/><path d="m22 22-1.5-1.5"/></svg>
          </div>
          <div class="min-w-0">
            <h2 class="text-sm font-semibold" style="color: #fafafa;">Node.js Projects</h2>
            <p id="info" class="text-xs truncate" style="color: #71717a;">Click "Scan Home" to find projects</p>
          </div>
        </div>
        
        <!-- Search -->
        <div class="search-wrapper flex-shrink-0">
          <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
          <input type="text" id="searchInput" class="input search-input w-64" placeholder="Search projects..." />
          <span class="search-shortcut">⌘K</span>
        </div>
      </div>
    </div>

    <!-- Project Grid -->
    <div id="projectList" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3">
      <!-- Project cards will be dynamically inserted here -->
    </div>
  </main>

  <!-- Footer -->
  <footer class="footer" style="background-color: #111113; border-top: 1px solid rgba(255, 255, 255, 0.06); padding: 12px 24px; color: #52525b;">
    <span>Tafil v1.0</span>
    <span class="mx-2">·</span>
    <span>Built with Electron + Tailwind</span>
  </footer>

  <!-- Modal: Dependencies Missing -->
  <div id="dependencyModal" class="modal-backdrop hidden" style="background: rgba(0, 0, 0, 0.7);">
    <div class="modal animate-slide-up" style="background: #111113; border: 1px solid rgba(255, 255, 255, 0.08); color: #fafafa;">
      <div class="modal-header">
        <h3 class="modal-title">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#f59e0b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><path d="M12 9v4"/><path d="M12 17h.01"/></svg>
          Dependencies Missing
        </h3>
        <button id="modalCancelBtn" class="btn btn-ghost btn-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
        </button>
      </div>
      <div class="modal-body">
        <p class="text-sm text-secondary mb-4">This project requires dependencies to be installed before running. Would you like to install them now?</p>
      </div>
      <div class="modal-footer">
        <button id="modalInstallBtn" class="btn btn-primary">
          <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" x2="12" y1="15" y2="3"/></svg>
          Install Dependencies
        </button>
      </div>
    </div>
  </div>

  <!-- Modal: Custom Port -->
  <div id="customPortModal" class="modal-backdrop hidden">
    <div class="modal animate-slide-up">
      <div class="modal-header">
        <h3 class="modal-title">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#0ea5e9" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="8" x="2" y="2" rx="2" ry="2"/><rect width="20" height="8" x="2" y="14" rx="2" ry="2"/><line x1="6" x2="6.01" y1="6" y2="6"/><line x1="6" x2="6.01" y1="18" y2="18"/></svg>
          Custom Port
        </h3>
        <button id="cancelPortBtn" class="btn btn-ghost btn-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
        </button>
      </div>
      <div class="modal-body">
        <p class="text-sm text-secondary mb-2">Enter a custom port number:</p>
        <p class="text-xs text-muted mb-4">Default: <span id="defaultPortDisplay" class="text-emerald-500 font-mono font-medium">3000</span></p>
        <input type="number" id="customPortInput" class="input text-center font-mono text-lg" placeholder="3000" min="1000" max="65535" />
      </div>
      <div class="modal-footer">
        <button id="useDefaultPortBtn" class="btn btn-secondary">Use Default</button>
        <button id="useCustomPortBtn" class="btn btn-primary">Use Custom</button>
      </div>
    </div>
  </div>

  <!-- Modal: IDE Selector -->
  <div id="ideModal" class="modal-backdrop hidden">
    <div class="modal animate-slide-up" style="max-width: 360px;">
      <div class="modal-header">
        <h3 class="modal-title">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#8b5cf6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg>
          Open in Editor
        </h3>
        <button id="cancelIdeBtn" class="btn btn-ghost btn-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
        </button>
      </div>
      <div class="modal-body">
        <div id="ideList" class="space-y-2 max-h-72 overflow-y-auto">
          <!-- IDE options will be inserted here -->
        </div>
      </div>
    </div>
  </div>

  <!-- Modal: Confirm Dialog -->
  <div id="confirmDialog" class="modal-backdrop hidden">
    <div class="modal animate-slide-up">
      <div class="modal-header">
        <h3 class="modal-title">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#f43f5e" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/><line x1="10" x2="10" y1="11" y2="17"/><line x1="14" x2="14" y1="11" y2="17"/></svg>
          <span id="confirmTitle">Confirm Action</span>
        </h3>
        <button id="confirmNoBtn" class="btn btn-ghost btn-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
        </button>
      </div>
      <div class="modal-body">
        <p id="confirmMessage" class="text-sm text-secondary">Are you sure you want to proceed?</p>
      </div>
      <div class="modal-footer">
        <button id="confirmYesBtn" class="btn btn-danger">Remove</button>
      </div>
    </div>
  </div>

  <!-- Modal: Logs Viewer -->
  <div id="logsModal" class="modal-backdrop hidden">
    <div class="modal animate-slide-up" style="max-width: 640px; width: 95%;">
      <div class="modal-header">
        <h3 class="modal-title">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#10b981" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="4 17 10 11 4 5"/><line x1="12" x2="20" y1="19" y2="19"/></svg>
          <span id="logsProjectName">Project Logs</span>
        </h3>
        <button id="closeLogsBtn" class="btn btn-ghost btn-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
        </button>
      </div>
      <div class="modal-body p-0">
        <div id="logsContent" class="bg-primary p-4 overflow-y-auto max-h-96 font-mono text-xs text-tertiary">
          <p>No logs available</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal: Settings -->
  <div id="settingsModal" class="modal-backdrop hidden">
    <div class="modal animate-slide-up" style="max-width: 480px; width: 95%;">
      <div class="modal-header">
        <h3 class="modal-title">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></svg>
          Settings
        </h3>
        <button id="closeSettingsBtn" class="btn btn-ghost btn-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
        </button>
      </div>
      <div class="modal-body space-y-4 max-h-[60vh] overflow-y-auto">
        <!-- Default IDE Section -->
        <div class="settings-section">
          <div class="flex items-center justify-between mb-3">
            <div>
              <h4 class="settings-section-title">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#8b5cf6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg>
                Default Editor
              </h4>
              <p class="settings-section-desc">Choose your preferred code editor</p>
            </div>
            <span id="currentIdeDisplay" class="hidden text-xs text-violet-400 bg-violet-500/10 px-2 py-1 rounded"></span>
          </div>
          <div id="defaultIdeList" class="space-y-1.5 max-h-48 overflow-y-auto">
            <!-- IDE options will be inserted here -->
          </div>
          <p id="noIdeMessage" class="hidden text-xs text-amber-400 mt-2 flex items-center gap-1">
            <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><path d="M12 9v4"/><path d="M12 17h.01"/></svg>
            No IDEs detected
          </p>
        </div>

        <!-- Default Terminal Section -->
        <div class="settings-section">
          <div class="flex items-center justify-between mb-3">
            <div>
              <h4 class="settings-section-title">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#10b981" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="4 17 10 11 4 5"/><line x1="12" x2="20" y1="19" y2="19"/></svg>
                Default Terminal
              </h4>
              <p class="settings-section-desc">Choose your preferred terminal app</p>
            </div>
            <span id="currentTerminalDisplay" class="hidden text-xs text-emerald-400 bg-emerald-500/10 px-2 py-1 rounded"></span>
          </div>
          <div id="defaultTerminalList" class="space-y-1.5">
            <!-- Terminal options will be inserted here -->
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button id="cancelSettingsBtn" class="btn btn-secondary">Cancel</button>
        <button id="saveSettingsBtn" class="btn btn-primary">Save Settings</button>
      </div>
    </div>
  </div>

  <!-- Renderer script -->
  <script src="renderer.js" defer></script>
</body>
</html>

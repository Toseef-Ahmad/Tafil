<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Tafil</title>

  <!-- Google Fonts - Inter -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet" />

  <!-- Tailwind compiled CSS -->
  <link rel="stylesheet" href="./dist/output.css" />
  
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; script-src 'self'; img-src 'self' data:;" />
  
  <style>
    body { opacity: 1 !important; visibility: visible !important; }
    
    /* Sidebar */
    .sidebar { width: 240px; min-width: 240px; transition: width 0.2s ease; }
    .sidebar.collapsed { width: 56px; min-width: 56px; }
    .sidebar.collapsed .sidebar-text { display: none; }
    .sidebar.collapsed .sidebar-section-title { display: none; }
    .sidebar.collapsed .collection-count { display: none; }
    
    /* Sidebar items */
    .sidebar-item { 
      display: flex; align-items: center; gap: 10px; padding: 8px 12px; 
      border-radius: 6px; cursor: pointer; transition: all 0.15s ease;
      color: #a1a1aa; font-size: 13px; font-weight: 500;
    }
    .sidebar-item:hover { background: rgba(255,255,255,0.05); color: #fafafa; }
    .sidebar-item.active { background: rgba(139, 92, 246, 0.15); color: #a78bfa; }
    .sidebar-item.active svg { stroke: #a78bfa; }
    
    /* Collection items */
    .collection-item {
      display: flex; align-items: center; justify-content: space-between;
      padding: 6px 12px; border-radius: 6px; cursor: pointer;
      transition: all 0.15s ease; color: #a1a1aa; font-size: 13px;
    }
    .collection-item:hover { background: rgba(255,255,255,0.05); color: #fafafa; }
    .collection-item.active { background: rgba(139, 92, 246, 0.15); color: #a78bfa; }
    .collection-item.drag-over { background: rgba(139, 92, 246, 0.25); border: 1px dashed #a78bfa; }
    
    .collection-count {
      font-size: 11px; color: #52525b; background: rgba(255,255,255,0.05);
      padding: 2px 6px; border-radius: 4px; font-weight: 500;
    }
    
    /* Command Palette */
    .command-palette {
      position: fixed; top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0, 0, 0, 0.6); backdrop-filter: blur(4px);
      z-index: 1000; display: flex; align-items: flex-start; justify-content: center;
      padding-top: 15vh;
    }
    .command-palette.hidden { display: none; }
    .command-palette-box {
      width: 560px; max-width: 95vw; background: #18181b;
      border: 1px solid rgba(255,255,255,0.1); border-radius: 12px;
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
      overflow: hidden;
    }
    .command-input {
      width: 100%; padding: 16px 20px; background: transparent;
      border: none; border-bottom: 1px solid rgba(255,255,255,0.06);
      color: #fafafa; font-size: 15px; outline: none;
    }
    .command-input::placeholder { color: #52525b; }
    .command-results { max-height: 320px; overflow-y: auto; }
    .command-item {
      display: flex; align-items: center; gap: 12px; padding: 10px 16px;
      cursor: pointer; transition: background 0.1s ease;
    }
    .command-item:hover, .command-item.selected { background: rgba(139, 92, 246, 0.15); }
    .command-item-icon { 
      width: 32px; height: 32px; border-radius: 6px; 
      background: rgba(255,255,255,0.05); display: flex; 
      align-items: center; justify-content: center; color: #71717a;
    }
    .command-item.selected .command-item-icon { color: #a78bfa; }
    .command-item-text { flex: 1; }
    .command-item-title { font-size: 13px; color: #fafafa; font-weight: 500; }
    .command-item-desc { font-size: 11px; color: #71717a; }
    .command-shortcut { 
      font-size: 11px; color: #52525b; background: rgba(255,255,255,0.05);
      padding: 2px 6px; border-radius: 4px; font-family: 'JetBrains Mono', monospace;
    }
    
    /* Notifications */
    .notifications-container {
      position: fixed; bottom: 20px; right: 20px; z-index: 999;
      display: flex; flex-direction: column; gap: 8px;
    }
    .notification {
      display: flex; align-items: center; gap: 10px; padding: 12px 16px;
      background: #18181b; border: 1px solid rgba(255,255,255,0.1);
      border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      animation: slideIn 0.2s ease; min-width: 280px; max-width: 400px;
    }
    .notification.success { border-left: 3px solid #10b981; }
    .notification.error { border-left: 3px solid #f43f5e; }
    .notification.info { border-left: 3px solid #0ea5e9; }
    .notification.warning { border-left: 3px solid #f59e0b; }
    @keyframes slideIn {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
    
    /* Insights Panel */
    .insights-panel {
      background: #111113; border: 1px solid rgba(255,255,255,0.06);
      border-radius: 10px; padding: 16px; margin-bottom: 16px;
    }
    .insight-item {
      display: flex; align-items: center; gap: 10px; padding: 8px 0;
      border-bottom: 1px solid rgba(255,255,255,0.04);
    }
    .insight-item:last-child { border-bottom: none; }
    .insight-icon {
      width: 28px; height: 28px; border-radius: 6px; display: flex;
      align-items: center; justify-content: center;
    }
    .insight-icon.warning { background: rgba(245, 158, 11, 0.15); color: #f59e0b; }
    .insight-icon.error { background: rgba(244, 63, 94, 0.15); color: #f43f5e; }
    .insight-icon.success { background: rgba(16, 185, 129, 0.15); color: #10b981; }
    .insight-icon.info { background: rgba(14, 165, 233, 0.15); color: #0ea5e9; }
    
    /* Running Projects Badge */
    .running-badge {
      display: inline-flex; align-items: center; gap: 4px;
      background: rgba(16, 185, 129, 0.15); color: #10b981;
      padding: 2px 8px; border-radius: 10px; font-size: 11px; font-weight: 600;
    }
    .running-badge.external {
      background: rgba(59, 130, 246, 0.15); color: #3b82f6;
    }
    .running-badge .dot {
      width: 6px; height: 6px; background: #10b981;
      border-radius: 50%; animation: pulse 1.5s infinite;
    }
    .running-badge.external .dot {
      background: #3b82f6;
    }
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    
    /* Project Card Enhancements */
    .project-card {
      background: #111113; border: 1px solid rgba(255,255,255,0.06);
      border-radius: 10px; padding: 14px; transition: all 0.2s ease;
      cursor: pointer;
    }
    .project-card:hover { 
      border-color: rgba(139, 92, 246, 0.3); 
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }
    .project-card.running { border-color: rgba(16, 185, 129, 0.4); }
    .project-card.dragging { opacity: 0.5; }
    
    /* Git Status */
    .git-status {
      display: flex; align-items: center; gap: 8px; font-size: 11px; color: #71717a;
    }
    .git-branch { display: flex; align-items: center; gap: 4px; }
    .git-changes {
      display: flex; align-items: center; gap: 6px;
    }
    .git-changes .added { color: #10b981; }
    .git-changes .modified { color: #f59e0b; }
    .git-changes .deleted { color: #f43f5e; }
    
    /* Framework Badge */
    .framework-badge {
      font-size: 10px; font-weight: 600; padding: 2px 6px;
      border-radius: 4px; text-transform: uppercase; letter-spacing: 0.5px;
    }
    .framework-badge.react { background: rgba(97, 218, 251, 0.15); color: #61dafb; }
    .framework-badge.next { background: rgba(255, 255, 255, 0.1); color: #fafafa; }
    .framework-badge.vite { background: rgba(189, 52, 254, 0.15); color: #bd34fe; }
    .framework-badge.vue { background: rgba(66, 184, 131, 0.15); color: #42b883; }
    .framework-badge.angular { background: rgba(221, 0, 49, 0.15); color: #dd0031; }
    .framework-badge.express { background: rgba(255, 255, 255, 0.1); color: #fafafa; }
    .framework-badge.node { background: rgba(104, 160, 99, 0.15); color: #68a063; }
    
    /* Action buttons */
    .action-btn {
      display: inline-flex; align-items: center; justify-content: center;
      width: 28px; height: 28px; border-radius: 6px;
      background: rgba(255,255,255,0.05); color: #71717a;
      border: none; cursor: pointer; transition: all 0.15s ease;
    }
    .action-btn:hover { background: rgba(255,255,255,0.1); color: #fafafa; }
    .action-btn.play { color: #10b981; }
    .action-btn.play:hover { background: rgba(16, 185, 129, 0.15); }
    .action-btn.stop { color: #f43f5e; }
    .action-btn.stop:hover { background: rgba(244, 63, 94, 0.15); }
    
    /* Scrollbar */
    ::-webkit-scrollbar { width: 6px; height: 6px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: #27272a; border-radius: 3px; }
    ::-webkit-scrollbar-thumb:hover { background: #3f3f46; }
  </style>
</head>
<body class="min-h-screen flex" style="font-family: 'Inter', -apple-system, sans-serif; background-color: #0a0a0b; color: #fafafa;">
  
  <!-- Sidebar -->
  <aside id="sidebar" class="sidebar flex flex-col h-screen sticky top-0" style="background: #111113; border-right: 1px solid rgba(255,255,255,0.06);">
    <!-- Sidebar Header -->
    <div class="flex items-center justify-between p-3 border-b" style="border-color: rgba(255,255,255,0.06);">
      <div class="flex items-center gap-2">
        <div class="w-7 h-7 rounded-lg bg-gradient-to-br from-violet-500 to-purple-600 flex items-center justify-center">
          <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="m7 11 2-2-2-2"/><path d="M11 13h4"/><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/></svg>
        </div>
        <span class="sidebar-text text-sm font-semibold">Tafil</span>
      </div>
      <button id="toggleSidebar" class="action-btn" title="Toggle Sidebar">
        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M9 3v18"/></svg>
      </button>
    </div>
    
    <!-- Navigation -->
    <nav class="flex-1 overflow-y-auto p-2">
      <!-- Quick Actions -->
      <div class="mb-4">
        <div class="sidebar-item" id="navAllProjects" data-view="all">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"/></svg>
          <span class="sidebar-text">All Projects</span>
          <span class="collection-count" id="allProjectsCount">0</span>
        </div>
        <div class="sidebar-item" id="navRunning" data-view="running">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polygon points="10 8 16 12 10 16 10 8" fill="currentColor"/></svg>
          <span class="sidebar-text">Running</span>
          <span class="running-badge hidden" id="runningCount"><span class="dot"></span><span id="runningNum">0</span></span>
        </div>
        <div class="sidebar-item" id="navInsights" data-view="insights">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 3v18h18"/><path d="m19 9-5 5-4-4-3 3"/></svg>
          <span class="sidebar-text">Insights</span>
        </div>
      </div>
      
      <!-- Collections Section -->
      <div class="mb-4">
        <div class="flex items-center justify-between px-3 py-2">
          <span class="sidebar-section-title text-xs font-semibold uppercase tracking-wider" style="color: #52525b;">Collections</span>
          <button id="addCollectionBtn" class="action-btn" style="width: 20px; height: 20px;" title="New Collection">
            <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="M12 5v14"/></svg>
          </button>
        </div>
        <div id="collectionsList" class="space-y-1">
          <!-- Collections will be inserted here -->
        </div>
      </div>
      
      <!-- Scan Actions -->
      <div class="border-t pt-3" style="border-color: rgba(255,255,255,0.06);">
        <div class="sidebar-item" id="scanHomeBtn">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
          <span class="sidebar-text">Scan Home</span>
        </div>
        <div class="sidebar-item" id="scanFolderBtn">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"/><path d="M12 10v6"/><path d="m9 13 3-3 3 3"/></svg>
          <span class="sidebar-text">Scan Folder</span>
        </div>
      </div>
    </nav>
    
    <!-- Sidebar Footer -->
    <div class="p-2 border-t" style="border-color: rgba(255,255,255,0.06);">
      <div class="sidebar-item" id="settingsBtn">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></svg>
        <span class="sidebar-text">Settings</span>
      </div>
    </div>
  </aside>
  
  <!-- Main Content Area -->
  <div class="flex-1 flex flex-col min-h-screen overflow-hidden">
    <!-- Header -->
    <header class="sticky top-0 z-40 flex items-center justify-between px-5 h-14" style="background: #0a0a0b; border-bottom: 1px solid rgba(255,255,255,0.06);">
      <!-- Search / Command Palette Trigger -->
      <button id="commandTrigger" class="flex items-center gap-3 px-4 py-2 rounded-lg transition-all" style="background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.06);">
        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#71717a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
        <span class="text-sm" style="color: #52525b;">Search projects...</span>
        <span class="command-shortcut">⌘K</span>
      </button>
      
      <!-- Right Actions -->
      <div class="flex items-center gap-2">
        <button id="refreshBtn" class="action-btn" title="Refresh">
          <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"/><path d="M16 16h5v5"/></svg>
        </button>
        <button id="darkModeToggle" class="action-btn" title="Toggle Theme">
          <svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/></svg>
          <svg id="sunIcon" class="hidden" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg>
        </button>
      </div>
    </header>
    
    <!-- Main Content -->
    <main class="flex-1 overflow-y-auto p-5" style="background: #0a0a0b;">
      <!-- View Title -->
      <div class="flex items-center justify-between mb-5">
        <div>
          <h1 id="viewTitle" class="text-lg font-semibold" style="color: #fafafa;">All Projects</h1>
          <p id="viewSubtitle" class="text-xs" style="color: #71717a;">Click "Scan Home" to find Node.js projects</p>
        </div>
        <div class="flex items-center gap-2">
          <span id="ideCount" class="hidden text-xs px-2 py-1 rounded" style="color: #71717a; background: rgba(255,255,255,0.05);">
            <span id="ideCountNum">0</span> IDEs detected
          </span>
        </div>
      </div>
      
      <!-- Insights Panel (hidden by default) -->
      <div id="insightsPanel" class="hidden">
        <div class="insights-panel mb-4">
          <h3 class="text-sm font-semibold mb-3" style="color: #fafafa;">Project Health</h3>
          <div id="insightsList">
            <!-- Insights will be inserted here -->
          </div>
        </div>
      </div>
      
      <!-- Project Grid -->
      <div id="projectList" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3">
        <!-- Project cards will be dynamically inserted here -->
      </div>
      
      <!-- Empty State -->
      <div id="emptyState" class="hidden flex flex-col items-center justify-center py-20">
        <div class="w-16 h-16 rounded-2xl bg-gradient-to-br from-violet-500/20 to-purple-600/20 flex items-center justify-center mb-4">
          <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#a78bfa" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"/></svg>
        </div>
        <h3 class="text-base font-semibold mb-1" style="color: #fafafa;">No projects found</h3>
        <p class="text-sm mb-4" style="color: #71717a;">Scan your home folder or a custom directory to get started</p>
        <div class="flex gap-2">
          <button id="emptyStateScanHome" class="px-4 py-2 rounded-lg text-sm font-medium transition-all" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed); color: white;">
            Scan Home
          </button>
          <button id="emptyStateScanFolder" class="px-4 py-2 rounded-lg text-sm font-medium transition-all" style="background: rgba(255,255,255,0.05); color: #fafafa; border: 1px solid rgba(255,255,255,0.1);">
            Scan Folder
          </button>
        </div>
      </div>
    </main>
  </div>
  
  <!-- Command Palette -->
  <div id="commandPalette" class="command-palette hidden">
    <div class="command-palette-box">
      <input type="text" id="commandInput" class="command-input" placeholder="Type a command or search..." autofocus />
      <div id="commandResults" class="command-results">
        <!-- Command results will be inserted here -->
      </div>
      <div class="px-4 py-2 text-xs flex items-center gap-4" style="color: #52525b; border-top: 1px solid rgba(255,255,255,0.06);">
        <span><kbd class="command-shortcut">↑↓</kbd> Navigate</span>
        <span><kbd class="command-shortcut">↵</kbd> Select</span>
        <span><kbd class="command-shortcut">Esc</kbd> Close</span>
      </div>
    </div>
  </div>
  
  <!-- Notifications Container -->
  <div id="notificationsContainer" class="notifications-container"></div>

  <!-- Modal: Dependencies Missing -->
  <div id="dependencyModal" class="modal-backdrop hidden" style="position: fixed; inset: 0; background: rgba(0, 0, 0, 0.7); z-index: 100; display: flex; align-items: center; justify-content: center;">
    <div class="modal animate-slide-up" style="background: #18181b; border: 1px solid rgba(255, 255, 255, 0.08); color: #fafafa; border-radius: 12px; width: 400px; max-width: 95vw;">
      <div class="modal-header" style="display: flex; align-items: center; justify-content: space-between; padding: 16px; border-bottom: 1px solid rgba(255,255,255,0.06);">
        <h3 class="modal-title" style="display: flex; align-items: center; gap: 8px; font-size: 14px; font-weight: 600;">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#f59e0b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><path d="M12 9v4"/><path d="M12 17h.01"/></svg>
          Dependencies Missing
        </h3>
        <button id="modalCancelBtn" class="action-btn">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
        </button>
      </div>
      <div class="modal-body" style="padding: 16px;">
        <p class="text-sm" style="color: #a1a1aa;">This project requires dependencies to be installed before running. Would you like to install them now?</p>
      </div>
      <div class="modal-footer" style="display: flex; justify-content: flex-end; gap: 8px; padding: 16px; border-top: 1px solid rgba(255,255,255,0.06);">
        <button id="modalInstallBtn" class="px-4 py-2 rounded-lg text-sm font-medium" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed); color: white;">
          Install Dependencies
        </button>
      </div>
    </div>
  </div>

  <!-- Modal: Confirm Dialog -->
  <div id="confirmDialog" class="modal-backdrop hidden" style="position: fixed; inset: 0; background: rgba(0, 0, 0, 0.7); z-index: 100; display: flex; align-items: center; justify-content: center;">
    <div class="modal animate-slide-up" style="background: #18181b; border: 1px solid rgba(255, 255, 255, 0.08); color: #fafafa; border-radius: 12px; width: 400px; max-width: 95vw;">
      <div class="modal-header" style="display: flex; align-items: center; justify-content: space-between; padding: 16px; border-bottom: 1px solid rgba(255,255,255,0.06);">
        <h3 class="modal-title" style="display: flex; align-items: center; gap: 8px; font-size: 14px; font-weight: 600;">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#f43f5e" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/></svg>
          <span id="confirmTitle">Confirm Action</span>
        </h3>
        <button id="confirmNoBtn" class="action-btn">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
        </button>
      </div>
      <div class="modal-body" style="padding: 16px;">
        <p id="confirmMessage" class="text-sm" style="color: #a1a1aa;">Are you sure you want to proceed?</p>
      </div>
      <div class="modal-footer" style="display: flex; justify-content: flex-end; gap: 8px; padding: 16px; border-top: 1px solid rgba(255,255,255,0.06);">
        <button id="confirmYesBtn" class="px-4 py-2 rounded-lg text-sm font-medium" style="background: rgba(244, 63, 94, 0.15); color: #f43f5e;">
          Remove
        </button>
      </div>
    </div>
  </div>

  <!-- Modal: Logs Viewer -->
  <div id="logsModal" class="modal-backdrop hidden" style="position: fixed; inset: 0; background: rgba(0, 0, 0, 0.7); z-index: 100; display: flex; align-items: center; justify-content: center;">
    <div class="modal animate-slide-up" style="background: #18181b; border: 1px solid rgba(255, 255, 255, 0.08); color: #fafafa; border-radius: 12px; width: 640px; max-width: 95vw;">
      <div class="modal-header" style="display: flex; align-items: center; justify-content: space-between; padding: 16px; border-bottom: 1px solid rgba(255,255,255,0.06);">
        <h3 class="modal-title" style="display: flex; align-items: center; gap: 8px; font-size: 14px; font-weight: 600;">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#10b981" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="4 17 10 11 4 5"/><line x1="12" x2="20" y1="19" y2="19"/></svg>
          <span id="logsProjectName">Project Logs</span>
        </h3>
        <button id="closeLogsBtn" class="action-btn">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
        </button>
      </div>
      <div id="logsContent" style="background: #0a0a0b; padding: 16px; overflow-y: auto; max-height: 400px; font-family: 'JetBrains Mono', monospace; font-size: 12px; color: #a1a1aa;">
        <p>No logs available</p>
      </div>
    </div>
  </div>

  <!-- Modal: Settings -->
  <div id="settingsModal" class="modal-backdrop hidden" style="position: fixed; inset: 0; background: rgba(0, 0, 0, 0.7); z-index: 100; display: flex; align-items: center; justify-content: center;">
    <div class="modal animate-slide-up" style="background: #18181b; border: 1px solid rgba(255, 255, 255, 0.08); color: #fafafa; border-radius: 12px; width: 480px; max-width: 95vw;">
      <div class="modal-header" style="display: flex; align-items: center; justify-content: space-between; padding: 16px; border-bottom: 1px solid rgba(255,255,255,0.06);">
        <h3 class="modal-title" style="display: flex; align-items: center; gap: 8px; font-size: 14px; font-weight: 600;">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></svg>
          Settings
        </h3>
        <button id="closeSettingsBtn" class="action-btn">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
        </button>
      </div>
      <div class="modal-body" style="padding: 16px; max-height: 60vh; overflow-y: auto;">
        <!-- Default IDE Section -->
        <div class="mb-4">
          <h4 class="text-sm font-medium mb-2" style="color: #fafafa;">Default Editor</h4>
          <p class="text-xs mb-3" style="color: #71717a;">Choose your preferred code editor</p>
          <div id="defaultIdeList" class="space-y-2">
            <!-- IDE options will be inserted here -->
          </div>
          <p id="noIdeMessage" class="hidden text-xs mt-2" style="color: #f59e0b;">No IDEs detected</p>
        </div>

        <!-- Default Terminal Section -->
        <div>
          <h4 class="text-sm font-medium mb-2" style="color: #fafafa;">Default Terminal</h4>
          <p class="text-xs mb-3" style="color: #71717a;">Choose your preferred terminal app</p>
          <div id="defaultTerminalList" class="space-y-2">
            <!-- Terminal options will be inserted here -->
          </div>
        </div>
      </div>
      <div class="modal-footer" style="display: flex; justify-content: flex-end; gap: 8px; padding: 16px; border-top: 1px solid rgba(255,255,255,0.06);">
        <button id="cancelSettingsBtn" class="px-4 py-2 rounded-lg text-sm font-medium" style="background: rgba(255,255,255,0.05); color: #a1a1aa;">Cancel</button>
        <button id="saveSettingsBtn" class="px-4 py-2 rounded-lg text-sm font-medium" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed); color: white;">Save Settings</button>
      </div>
    </div>
  </div>

  <!-- Modal: New Collection -->
  <div id="newCollectionModal" class="modal-backdrop hidden" style="position: fixed; inset: 0; background: rgba(0, 0, 0, 0.7); z-index: 100; display: flex; align-items: center; justify-content: center;">
    <div class="modal animate-slide-up" style="background: #18181b; border: 1px solid rgba(255, 255, 255, 0.08); color: #fafafa; border-radius: 12px; width: 360px; max-width: 95vw;">
      <div class="modal-header" style="display: flex; align-items: center; justify-content: space-between; padding: 16px; border-bottom: 1px solid rgba(255,255,255,0.06);">
        <h3 class="modal-title" style="display: flex; align-items: center; gap: 8px; font-size: 14px; font-weight: 600;">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#a78bfa" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"/></svg>
          New Collection
        </h3>
        <button id="closeNewCollectionBtn" class="action-btn">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
        </button>
      </div>
      <div class="modal-body" style="padding: 16px;">
        <input type="text" id="newCollectionInput" placeholder="Collection name..." style="width: 100%; padding: 10px 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; color: #fafafa; font-size: 14px; outline: none;" />
      </div>
      <div class="modal-footer" style="display: flex; justify-content: flex-end; gap: 8px; padding: 16px; border-top: 1px solid rgba(255,255,255,0.06);">
        <button id="createCollectionBtn" class="px-4 py-2 rounded-lg text-sm font-medium" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed); color: white;">
          Create
        </button>
      </div>
    </div>
  </div>

  <!-- Modal: Project Insights -->
  <div id="projectInsightsModal" class="modal-backdrop hidden" style="position: fixed; inset: 0; background: rgba(0, 0, 0, 0.7); z-index: 100; display: flex; align-items: center; justify-content: center;">
    <div class="modal animate-slide-up" style="background: #18181b; border: 1px solid rgba(255, 255, 255, 0.08); color: #fafafa; border-radius: 12px; width: 520px; max-width: 95vw;">
      <div class="modal-header" style="display: flex; align-items: center; justify-content: space-between; padding: 16px; border-bottom: 1px solid rgba(255,255,255,0.06);">
        <h3 class="modal-title" style="display: flex; align-items: center; gap: 8px; font-size: 14px; font-weight: 600;">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#0ea5e9" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 3v18h18"/><path d="m19 9-5 5-4-4-3 3"/></svg>
          <span id="insightsProjectName">Project Insights</span>
        </h3>
        <button id="closeInsightsBtn" class="action-btn">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
        </button>
      </div>
      <div id="projectInsightsContent" class="modal-body" style="padding: 16px; max-height: 60vh; overflow-y: auto;">
        <!-- Project insights will be inserted here -->
      </div>
    </div>
  </div>

  <!-- Renderer script -->
  <script src="renderer.js" defer></script>
</body>
</html>
